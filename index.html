<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="shortcut icon" href="static/media/favicon.ico">
  <link type="text/css" rel="stylesheet" href="static/css/bootstrap.min.css">
  <link type="text/css" rel="stylesheet" href="static/css/main.css">
  <script type="text/javascript" src="static/js/jquery.min.js"></script>
  <script type='text/javascript' src='config.js'></script>
  <script type="text/javascript" src="static/js/tether.min.js"></script>
  <script type="text/javascript" src="static/js/tether_bootstrap.min.js"></script>
  <script type="text/javascript" src="static/js/bootstrap.min.js"></script>
  <script type='text/javascript' src="static/js/require.js"></script>
  <script type='text/javascript' src="static/js/openaq.js"></script>
  <script type="text/javascript" src="static/js/htmljs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Current Conditions</title>

  <meta property="og:image" content="static/media/homepage.jpg" />

</head>

<body>

  <nav class="navbar navbar-inverse navbar-fixed-top">
    <div class="container-fluid">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header">
        <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a href="index.html">
          <img id="pavan-brand" src="static/media/pavan-logo.png"></div>
        </a>


      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

        <!-- code for the right side of the navbar -->
        <ul class="nav navbar-nav navbar-right">

          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
              Learn
              <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="health.html">Health</a></li>
              <li><a href="pollution-causes.html">Pollution Causes</a></li>
              <!--<li><a href="#">Something else here</a></li>-->
              <!--<li role="separator" class="divider"></li>-->
              <li><a href="news.html">News</a></li>
            </ul>
          </li>
          <li><a href="pollution-solutions.html">Pollution Solutions</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
              About
              <span class="caret"></span></a>
            <ul class="dropdown-menu">
              <li><a href="founders.html">Pavan Founders and Advisers</a></li>
              <li><a href="contact.html">Contact Us</a></li>
              <!--<li><a href="#">Something else here</a></li>-->
              <!--<li role="separator" class="divider"></li>-->
            </ul>
          </li>
        </ul>
      </div><!-- /.navbar-collapse -->

    </div><!-- /.container-fluid -->
  </div>
  </nav>

  <div id="graphic1" class="container-fluid">
    <ul id="home-graphic">
      <li id="graphic1a" class="graphic-lines"> Current Conditions in: Delhi, india </li>
    </ul>
</div>

<div id="graphic2" class="container-fluid">
  <div class="graphicHeader">
      Find the air quality in your area <h2 id="time-head"></h2>
  </div>
  <div class="row">
    <div class="col-md-8">

          <div id="chart"></div>


          <script type="text/javascript">

          require.config({
          paths: {
          	d3: "//cdnjs.cloudflare.com/ajax/libs/d3/3.5.3/d3.min",
          	geo: "//d3js.org/d3.geo.projection.v0.min",
          	topo: "//d3js.org/topojson.v1"
         },
         shim: {
         	geo: {
         		deps: ["d3"]
         	},
         	topo:{
         		deps: ["d3","geo"]
         	}
         }
        });

        require(["d3","geo","topo"],function(d3,geo,topojson){

          var legend_labels = ["< 50", "50+", "100+", "150+", "200+", ">300"];

          var color_domain = [50, 150, 350, 750, 1500];
          var ext_color_domain = ["#641E16", "#633974", "#e74c3c", "#f39c12", "#148f77", "#1f618d"];
          var color = d3.scale.threshold()
            .domain(color_domain)
            .range(["#641E16", "#633974", "#e74c3c", "#f39c12", "#148f77", "#1f618d"]);

            var width = 1300,
              height = 1450;

            var projection = d3.geo.albers()
              .center([0, 20.5937])
              .rotate([-78.9629, 0])
              .parallels([6, 39])
              .scale(1500)
              .translate([300, 420]);

            var path = d3.geo.path()
                .projection(projection);

            var svg = d3.select("#chart").append("svg")
                .attr("width", width)
                .attr("height", height);

            var color = d3.scale.category10()

            // points
            coords = [[327, 207, 0.3]];

            function showPosition(position) {
               coords.push([position.coords.latitude, position.coords.longitude]);
            }

            if (navigator.geolocation) {
                navigator.geolocation.watchPosition(showPosition);
                //coords.push([311,231, 0.6]);
            }

            d3.json("india.json", function(error, india) {
              svg.selectAll(".subunit")
                  .data(topojson.feature(india, india.objects.subunits).features)

                .enter().append("path")
                  .attr("class", function(d) { return "subunit " + d.id; })
                  .attr("d", path)
                  .style("fill", function (d,i) { return "#c1c1c1" });

              svg.selectAll(".place-label")
                .data(topojson.feature(india, india.objects.places).features)
              .enter().append("text")
                .attr("class", "place-label")
                .attr("transform", function(d) { return "translate(" + projection(d.geometry.coordinates) + ")"; })
                .attr("x", function(d) { return d.geometry.coordinates[0] > -1 ? 6 : -6; })
                .attr("dy", ".35em")
                .style("text-anchor", function(d) { return d.geometry.coordinates[0] > -1 ? "start" : "end"; })
                .text(function(d) { return d.properties.name; });

                svg.selectAll("circle")
              		.data(coords).enter()
              		.append("circle")
              		.attr("cx", function (d) { return (d)[0]-50; })
              		.attr("cy", function (d) { return (d)[1]-10; })
              		.attr("r", "2em")
              		.attr("fill", "red")
                  .style("opacity", function (d) { return (d)[2]; })
                  .each(pulse);

                  function pulse() {
              			var circle = svg.selectAll("circle");
              			(function repeat() {
              				circle = circle.transition()
                        .duration(1800)
                        .attr("r","4em")
                        .transition()
                        .attr("r","2em")
                        .each("end", repeat);
              			})();
              		}


                  d3.json("india.json", function(error, india) {
                  if (error) return console.error(error);
                      console.log(india);
                  });

            });

            var legend = svg.selectAll("g.legend")
              .data(ext_color_domain)
              .enter().append("g")
              .attr("class", "legend");

            var ls_w = 20, ls_h = 20;

            legend.append("rect")
              .attr("x", 20)
              .attr("y", function(d, i){ return height - (i*ls_h) - 2*ls_h - 800;})
              .attr("width", ls_w)
              .attr("height", ls_h)
              .style("fill", function(d, i) { return color(d); })
              .style("opacity", 0.6);

            legend.append("text")
              .attr("x", 50)
              .attr("y", function(d, i){ return height - (i*ls_h) - ls_h - 4 - 800;})
              .text(function(d, i){ return legend_labels[i]; });

        });

          </script>


    </div>
    <div class="col-4">
      <div id="result-search">

      </div>
    </div>
  </div>

  <br>

    <div class="graphic-description">
      <table style="width:100%">
        <tr>
          <th>Level</th>
          <th>AQI</th>
          <th>Meaning</th>
          <th>Activity</th>
        </tr>
        <tr style="background-color:#641E16;">
          <td>Good</td>
          <td>0 to 50</td>
          <td>Air quality is considered satisfactory. Air pollution poses little or no risk.</td>
          <td>All activities OK.</td>
        </tr>
        <tr style="background-color:#633974;">
          <td>Moderate</td>
          <td>51 to 100</td>
          <td>Air quality is acceptable; however some pollutants may affect unusually sensitive groups. </td>
          <td>Sensitive groups should reduce exertion outside.</td>
        </tr>
        <tr style="background-color:#e74c3c;">
          <td>Unhealthy for Sensitive Groups</td>
          <td>101 to 150</td>
          <td>Sensitive groups may experience health effects; increasing likelihood of respiratory symptoms in sensitive individuals, aggravation of heart or lung disease and premature mortality in persons with cardiopulmonary disease and the elderly. The general public is not likely to be affected.
</td>
          <td>All groups should reduce prolonged exertion outside. Active children and adults, and people with respiratory disease, such as asthma, should limit prolonged outdoor exertion.
</td>
        </tr>
        <tr style="background-color:#f39c12;">
          <td>Unhealthy</td>
          <td>151 to 200</td>
          <td>Everyone may begin to experience health effects; sensitive groups may experience more serious effects. Increased aggravation of heart or lung disease and premature mortality in persons with cardiopulmonary disease and the elderly; increased respiratory effects in general population.
 </td>
          <td>Avoid prolonged exertion outside. Active children and adults, and people with respiratory disease, such as asthma, should avoid prolonged outdoor exertion; everyone else, especially children, should limit prolonged outdoor exertion.
</td>
</tr>
        <tr style="background-color:#148f77;">
          <td>Very Unhealthy</td>
          <td>201 to 300 </td>
          <td> Health warnings of emergency conditions. The entire population is more likely to be affected. Significant aggravation of heart or lung disease and premature mortality in persons with cardiopulmonary disease and the elderly; significant increase in respiratory effects in general population.
 </td>
          <td> Avoid all outdoor activities. Active children and adults, and people with respiratory disease, such as asthma, should avoid all outdoor exertion; everyone else, especially children, should limit outdoor exertion.
 </td>
        </tr>
        <tr style="background-color:#1f618d;">
          <td> Hazardous </td>
          <td> 301 to 500 </td>
          <td> Health alert; everyone may experience more serious effects. Serious aggravation of heart or lung disease and premature mortality in persons with cardiopulmonary disease and the elderly; serious risk of respiratory effects in general population.
 </td>
          <td>Remain indoors. Everyone should avoid all outdoor exertion.
</td>
        </tr>
      </table>
    </div>
</div>
<br>

<div id="graphic3" class="container-fluid">

  <div class="graphicHeader">
    Find out more about air pollution where you live
  </div>
  <br>
  <div class="row graphic-row">
    <div class="col-sm-6">
      <img src="static/media/learn.png" class="homepagepic">
      <div class="graphic-description2">
        <h3 class="header2">LEARN</h3>
        Learn more about the causes and impacts of air pollution. <br>
        <a href="#"><div class="next">Learn More &gt;</div></a>
      </div>
    </div>
    <div class="col-sm-6">
      <img src="static/media/takeaction.png" class="homepagepic">
      <div class="graphic-description2">
        <h3 class="header2">TAKE ACTION</h3>
        Learn more about the causes and impacts of air pollution. <br>
        <a href="#"><div class="next">Learn More &gt;</div></a>
      </div>
    </div>
  </div>


</div>
<br><br><br><br><br>


<div id="footer" >
  <div class="row">
    <div class="col-sm-4 footing">
      <h2>Pavan</h2> <br>
      @2018 Pavan-india <br>
      Contact.Pavan.india@gmail.com
    </div>

    <div class="col-sm-3 footing">
      <a href="#"> Current Conditions </a><br>
      <a href="#"> Learn </a><br>
      <a href="#"> Pollution Solutions </a><br>
      <a href="#"> About </a>
    </div>

  </div>
</div>

</body>
<script type="text/javascript" src="static/js/apijs.js"></script>
</html>
